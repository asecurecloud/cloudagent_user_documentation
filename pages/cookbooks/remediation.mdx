import { Callout } from 'nextra/components'

# Automating Security Remediation from Discovery to Fix

This cookbook guides you through a complete workflow: identifying a security issue, fixing it with a blueprint, and verifying the resolution.

## Objective
To secure a public S3 bucket using CloudAgent's recommendation engine and blueprint builder.

## Step 1: Assessment

Start by reviewing the **Dashboard** to identify critical security findings.

1.  Navigate to the **Dashboard**.
2.  Look at the **Smart Recommendations** widget.
3.  Click on **ðŸ”’ Critical Security**.
4.  Locate the recommendation: **"S3 Bucket has public access enabled"**.

> **Tip**: Click on the number of items (e.g., "3 Items") to see the specific resources affected by this recommendation.

![Finding Recommendation Details](/images/recommendation_click_guide.png)

<Callout type="warning" emoji="âš ï¸">
  Public S3 buckets can expose sensitive data. It is critical to remediate this immediately unless public access is intentionally required.
</Callout>

## Step 2: Remediation

CloudAgent allows you to generate a remediation blueprint directly from the recommendation.

1.  Click the **Remediate** button next to the finding.
2.  This opens the **Blueprint Builder** with a pre-configured template.
3.  Review the generated CloudFormation template. It should include `PublicAccessBlockConfiguration` set to `true`.
4.  Click **Deploy** to apply the fix.

### Example Snippet
The blueprint will automatically add this configuration to your bucket:

```yaml
Type: AWS::S3::Bucket
Properties:
  BucketName: my-sensitive-data-bucket
  PublicAccessBlockConfiguration:
    BlockPublicAcls: true
    BlockPublicPolicy: true
    IgnorePublicAcls: true
    RestrictPublicBuckets: true
```

## Step 3: Validation

Once the deployment is complete, verify that the issue is resolved.

1.  Go back to the **Dashboard**.
2.  Check the **Activity** feed for the "Remediation Deployment" success status.
3.  Refresh the **Smart Recommendations** list.
4.  Verify that the "S3 Bucket has public access enabled" finding is **Gone**.

<Callout type="info" emoji="âœ…">
  **Success!** You have successfully identified, remediated, and verified a security vulnerability using CloudAgent.
</Callout>
